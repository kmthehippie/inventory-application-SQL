<!DOCTYPE html>
<html lang="en">
  <%- include('header') %>

  <body>
    <div class="body-class">
      <div class="sidebar"><%- include('sidebar.ejs') %></div>
      <div class="main">
        <h1><%=title%></h1>
        <table>
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Product ID</th>
              <th>Batch ID</th>
              <th>Quantity In</th>
              <th>Current Quantity</th>
              <th>Inventory Transactions</th>
            </tr>
          </thead>
          <tbody>
            <% for (const productid in productInventory) { %> <% const product =
            productInventory[productid]; %> <% for (const batchid in
            product.batches) { %> <% const batch = product.batches[batchid]; %>
            <tr>
              <td><%= product.name %></td>
              <td><%= product.productid %></td>
              <td><%= batch.batchid %></td>
              <td><%= batch.quantityin %></td>
              <td><%= batch.currentquantity %></td>
              <td>
                <table>
                  <thead>
                    <tr>
                      <th>Transaction ID</th>
                      <th>Transaction Type</th>
                      <th>Quantity</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for (const transaction of batch.transactions) { %>
                    <tr>
                      <td><%= transaction.transactionid %></td>
                      <td><%= transaction.transactiontype %></td>
                      <td><%= transaction.quantity %></td>
                    </tr>
                    <% } %>
                  </tbody>
                </table>
              </td>
            </tr>
            <% } %> <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
